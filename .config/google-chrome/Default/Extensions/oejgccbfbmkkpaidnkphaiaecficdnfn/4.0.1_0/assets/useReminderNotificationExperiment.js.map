{"version":3,"file":"useReminderNotificationExperiment.js","sources":["../../../node_modules/@growthbook/growthbook/dist/esm/util.js","../../../node_modules/@growthbook/growthbook/dist/esm/mongrule.js","../../../node_modules/@growthbook/growthbook/dist/esm/GrowthBook.js","../../../node_modules/@growthbook/growthbook-react/dist/esm/index.js","../../../node_modules/@toggl/ab-testing/src/index.tsx","../../../src/lib/hooks/useNewTabDiscoveryExperiment.ts","../../../src/lib/abTester.ts","../../../src/lib/hooks/useReminderNotificationExperiment.ts"],"sourcesContent":["function hashFnv32a(str) {\n  let hval = 0x811c9dc5;\n  const l = str.length;\n\n  for (let i = 0; i < l; i++) {\n    hval ^= str.charCodeAt(i);\n    hval += (hval << 1) + (hval << 4) + (hval << 7) + (hval << 8) + (hval << 24);\n  }\n\n  return hval >>> 0;\n}\n\nexport function hash(str) {\n  return hashFnv32a(str) % 1000 / 1000;\n}\nexport function getEqualWeights(n) {\n  if (n <= 0) return [];\n  return new Array(n).fill(1 / n);\n}\nexport function inNamespace(hashValue, namespace) {\n  const n = hash(hashValue + \"__\" + namespace[0]);\n  return n >= namespace[1] && n < namespace[2];\n}\nexport function chooseVariation(n, ranges) {\n  for (let i = 0; i < ranges.length; i++) {\n    if (n >= ranges[i][0] && n < ranges[i][1]) {\n      return i;\n    }\n  }\n\n  return -1;\n}\nexport function getUrlRegExp(regexString) {\n  try {\n    const escaped = regexString.replace(/([^\\\\])\\//g, \"$1\\\\/\");\n    return new RegExp(escaped);\n  } catch (e) {\n    console.error(e);\n    return undefined;\n  }\n}\nexport function getBucketRanges(numVariations, coverage = 1, weights) {\n  // Make sure coverage is within bounds\n  if (coverage < 0) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(\"Experiment.coverage must be greater than or equal to 0\");\n    }\n\n    coverage = 0;\n  } else if (coverage > 1) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(\"Experiment.coverage must be less than or equal to 1\");\n    }\n\n    coverage = 1;\n  } // Default to equal weights if missing or invalid\n\n\n  const equal = getEqualWeights(numVariations);\n  weights = weights || equal;\n\n  if (weights.length !== numVariations) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(\"Experiment.weights array must be the same length as Experiment.variations\");\n    }\n\n    weights = equal;\n  } // If weights don't add up to 1 (or close to it), default to equal weights\n\n\n  const totalWeight = weights.reduce((w, sum) => sum + w, 0);\n\n  if (totalWeight < 0.99 || totalWeight > 1.01) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(\"Experiment.weights must add up to 1\");\n    }\n\n    weights = equal;\n  } // Covert weights to ranges\n\n\n  let cumulative = 0;\n  return weights.map(w => {\n    const start = cumulative;\n    cumulative += w;\n    return [start, start + coverage * w];\n  });\n}\nexport function getQueryStringOverride(id, url, numVariations) {\n  if (!url) {\n    return null;\n  }\n\n  const search = url.split(\"?\")[1];\n\n  if (!search) {\n    return null;\n  }\n\n  const match = search.replace(/#.*/, \"\") // Get rid of anchor\n  .split(\"&\") // Split into key/value pairs\n  .map(kv => kv.split(\"=\", 2)).filter(([k]) => k === id) // Look for key that matches the experiment id\n  .map(([, v]) => parseInt(v)); // Parse the value into an integer\n\n  if (match.length > 0 && match[0] >= 0 && match[0] < numVariations) return match[0];\n  return null;\n}\nexport function isIncluded(include) {\n  try {\n    return include();\n  } catch (e) {\n    console.error(e);\n    return false;\n  }\n}\n//# sourceMappingURL=util.js.map","/* eslint-disable @typescript-eslint/no-explicit-any */\nconst _regexCache = {}; // The top-level condition evaluation function\n\nexport function evalCondition(obj, condition) {\n  // Recursive condition\n  if (\"$or\" in condition) {\n    return evalOr(obj, condition[\"$or\"]);\n  }\n\n  if (\"$nor\" in condition) {\n    return !evalOr(obj, condition[\"$nor\"]);\n  }\n\n  if (\"$and\" in condition) {\n    return evalAnd(obj, condition[\"$and\"]);\n  }\n\n  if (\"$not\" in condition) {\n    return !evalCondition(obj, condition[\"$not\"]);\n  } // Condition is an object, keys are object paths, values are the condition for that path\n\n\n  for (const [k, v] of Object.entries(condition)) {\n    if (!evalConditionValue(v, getPath(obj, k))) return false;\n  }\n\n  return true;\n} // Return value at dot-separated path of an object\n\nfunction getPath(obj, path) {\n  const parts = path.split(\".\");\n  let current = obj;\n\n  for (let i = 0; i < parts.length; i++) {\n    if (current && typeof current === \"object\" && parts[i] in current) {\n      current = current[parts[i]];\n    } else {\n      return null;\n    }\n  }\n\n  return current;\n} // Transform a regex string into a real RegExp object\n\n\nfunction getRegex(regex) {\n  if (!_regexCache[regex]) {\n    _regexCache[regex] = new RegExp(regex.replace(/([^\\\\])\\//g, \"$1\\\\/\"));\n  }\n\n  return _regexCache[regex];\n} // Evaluate a single value against a condition\n\n\nfunction evalConditionValue(condition, value) {\n  // Simple equality comparisons\n  if (typeof condition === \"string\") {\n    return value + \"\" === condition;\n  }\n\n  if (typeof condition === \"number\") {\n    return value * 1 === condition;\n  }\n\n  if (typeof condition === \"boolean\") {\n    return !!value === condition;\n  }\n\n  if (Array.isArray(condition) || !isOperatorObject(condition)) {\n    return JSON.stringify(value) === JSON.stringify(condition);\n  } // This is a special operator condition and we should evaluate each one separately\n\n\n  for (const op in condition) {\n    if (!evalOperatorCondition(op, value, condition[op])) {\n      return false;\n    }\n  }\n\n  return true;\n} // If the object has only keys that start with '$'\n\n\nfunction isOperatorObject(obj) {\n  const keys = Object.keys(obj);\n  return keys.length > 0 && keys.filter(k => k[0] === \"$\").length === keys.length;\n} // Return the data type of a value\n\n\nfunction getType(v) {\n  if (v === null) return \"null\";\n  if (Array.isArray(v)) return \"array\";\n  const t = typeof v;\n\n  if ([\"string\", \"number\", \"boolean\", \"object\", \"undefined\"].includes(t)) {\n    return t;\n  }\n\n  return \"unknown\";\n} // At least one element of actual must match the expected condition/value\n\n\nfunction elemMatch(actual, expected) {\n  if (!Array.isArray(actual)) return false;\n  const check = isOperatorObject(expected) ? v => evalConditionValue(expected, v) : v => evalCondition(v, expected);\n\n  for (let i = 0; i < actual.length; i++) {\n    if (actual[i] && check(actual[i])) {\n      return true;\n    }\n  }\n\n  return false;\n} // Evaluate a single operator condition\n\n\nfunction evalOperatorCondition(operator, actual, expected) {\n  switch (operator) {\n    case \"$eq\":\n      return actual === expected;\n\n    case \"$ne\":\n      return actual !== expected;\n\n    case \"$lt\":\n      return actual < expected;\n\n    case \"$lte\":\n      return actual <= expected;\n\n    case \"$gt\":\n      return actual > expected;\n\n    case \"$gte\":\n      return actual >= expected;\n\n    case \"$exists\":\n      return expected ? actual !== null : actual === null;\n\n    case \"$in\":\n      return expected.includes(actual);\n\n    case \"$nin\":\n      return !expected.includes(actual);\n\n    case \"$not\":\n      return !evalConditionValue(expected, actual);\n\n    case \"$size\":\n      if (!Array.isArray(actual)) return false;\n      return evalConditionValue(expected, actual.length);\n\n    case \"$elemMatch\":\n      return elemMatch(actual, expected);\n\n    case \"$all\":\n      if (!Array.isArray(actual)) return false;\n\n      for (let i = 0; i < expected.length; i++) {\n        let passed = false;\n\n        for (let j = 0; j < actual.length; j++) {\n          if (evalConditionValue(expected[i], actual[j])) {\n            passed = true;\n            break;\n          }\n        }\n\n        if (!passed) return false;\n      }\n\n      return true;\n\n    case \"$regex\":\n      try {\n        return getRegex(expected).test(actual);\n      } catch (e) {\n        return false;\n      }\n\n    case \"$type\":\n      return getType(actual) === expected;\n\n    default:\n      console.error(\"Unknown operator: \" + operator);\n      return false;\n  }\n} // Recursive $or rule\n\n\nfunction evalOr(obj, conditions) {\n  if (!conditions.length) return true;\n\n  for (let i = 0; i < conditions.length; i++) {\n    if (evalCondition(obj, conditions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n} // Recursive $and rule\n\n\nfunction evalAnd(obj, conditions) {\n  for (let i = 0; i < conditions.length; i++) {\n    if (!evalCondition(obj, conditions[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n//# sourceMappingURL=mongrule.js.map","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { getUrlRegExp, isIncluded, getBucketRanges, hash, chooseVariation, getQueryStringOverride, inNamespace } from \"./util\";\nimport { evalCondition } from \"./mongrule\";\nconst isBrowser = typeof window !== \"undefined\" && typeof document !== \"undefined\";\nexport class GrowthBook {\n  // eslint-disable-next-line\n  constructor(context = {}) {\n    _defineProperty(this, \"_renderer\", null);\n\n    _defineProperty(this, \"_trackedExperiments\", new Set());\n\n    _defineProperty(this, \"_trackedFeatures\", {});\n\n    _defineProperty(this, \"debug\", false);\n\n    _defineProperty(this, \"subscriptions\", new Set());\n\n    _defineProperty(this, \"_rtQueue\", []);\n\n    _defineProperty(this, \"_rtTimer\", 0);\n\n    _defineProperty(this, \"assigned\", new Map());\n\n    _defineProperty(this, \"_forcedFeatureValues\", new Map());\n\n    _defineProperty(this, \"_attributeOverrides\", {});\n\n    this.context = context;\n\n    if (isBrowser && !context.disableDevTools) {\n      window._growthbook = this;\n      document.dispatchEvent(new Event(\"gbloaded\"));\n    }\n  }\n\n  render() {\n    if (this._renderer) {\n      this._renderer();\n    }\n  }\n\n  setFeatures(features) {\n    this.context.features = features;\n    this.render();\n  }\n\n  setAttributes(attributes) {\n    this.context.attributes = attributes;\n    this.render();\n  }\n\n  setAttributeOverrides(overrides) {\n    this._attributeOverrides = overrides;\n    this.render();\n  }\n\n  setForcedVariations(vars) {\n    this.context.forcedVariations = vars || {};\n    this.render();\n  } // eslint-disable-next-line\n\n\n  setForcedFeatures(map) {\n    this._forcedFeatureValues = map;\n    this.render();\n  }\n\n  getAttributes() {\n    return { ...this.context.attributes,\n      ...this._attributeOverrides\n    };\n  }\n\n  getFeatures() {\n    return this.context.features || {};\n  }\n\n  subscribe(cb) {\n    this.subscriptions.add(cb);\n    return () => {\n      this.subscriptions.delete(cb);\n    };\n  }\n\n  getAllResults() {\n    return new Map(this.assigned);\n  }\n\n  destroy() {\n    // Release references to save memory\n    this.subscriptions.clear();\n    this.assigned.clear();\n\n    this._trackedExperiments.clear();\n\n    this._trackedFeatures = {};\n    this._rtQueue = [];\n\n    if (this._rtTimer) {\n      clearTimeout(this._rtTimer);\n    }\n\n    if (isBrowser && window._growthbook === this) {\n      delete window._growthbook;\n    }\n  }\n\n  setRenderer(renderer) {\n    this._renderer = renderer;\n  }\n\n  forceVariation(key, variation) {\n    this.context.forcedVariations = this.context.forcedVariations || {};\n    this.context.forcedVariations[key] = variation;\n    this.render();\n  }\n\n  run(experiment) {\n    const result = this._run(experiment, null);\n\n    this.fireSubscriptions(experiment, result);\n    return result;\n  }\n\n  fireSubscriptions(experiment, result) {\n    const key = experiment.key; // If assigned variation has changed, fire subscriptions\n\n    const prev = this.assigned.get(key); // TODO: what if the experiment definition has changed?\n\n    if (!prev || prev.result.inExperiment !== result.inExperiment || prev.result.variationId !== result.variationId) {\n      this.assigned.set(key, {\n        experiment,\n        result\n      });\n      this.subscriptions.forEach(cb => {\n        try {\n          cb(experiment, result);\n        } catch (e) {\n          console.error(e);\n        }\n      });\n    }\n  }\n\n  trackFeatureUsage(key, res) {\n    // Don't track feature usage that was forced via an override\n    if (res.source === \"override\") return; // Only track a feature once, unless the assigned value changed\n\n    const stringifiedValue = JSON.stringify(res.value);\n    if (this._trackedFeatures[key] === stringifiedValue) return;\n    this._trackedFeatures[key] = stringifiedValue; // Fire user-supplied callback\n\n    if (this.context.onFeatureUsage) {\n      try {\n        this.context.onFeatureUsage(key, res);\n      } catch (e) {// Ignore feature usage callback errors\n      }\n    } // In browser environments, queue up feature usage to be tracked in batches\n\n\n    if (!isBrowser || !window.fetch) return;\n\n    this._rtQueue.push({\n      key,\n      on: res.on\n    });\n\n    if (!this._rtTimer) {\n      this._rtTimer = window.setTimeout(() => {\n        // Reset the queue\n        this._rtTimer = 0;\n        const q = [...this._rtQueue];\n        this._rtQueue = []; // Skip logging if a real-time usage key is not configured\n\n        if (!this.context.realtimeKey) return;\n        window.fetch(\"https://rt.growthbook.io/?key=\".concat(this.context.realtimeKey, \"&events=\").concat(encodeURIComponent(JSON.stringify(q))), {\n          cache: \"no-cache\",\n          mode: \"no-cors\"\n        }).catch(() => {// TODO: retry in case of network errors?\n        });\n      }, this.context.realtimeInterval || 2000);\n    }\n  }\n\n  getFeatureResult(key, value, source, ruleId, experiment = null, result = null) {\n    const ret = {\n      value,\n      on: !!value,\n      off: !value,\n      source,\n      ruleId: ruleId || \"\"\n    };\n    if (experiment) ret.experiment = experiment;\n    if (result) ret.experimentResult = result; // Track the usage of this feature in real-time\n\n    this.trackFeatureUsage(key, ret);\n    return ret;\n  }\n\n  isOn(key) {\n    return this.evalFeature(key).on;\n  }\n\n  isOff(key) {\n    return this.evalFeature(key).off;\n  }\n\n  getFeatureValue(key, defaultValue) {\n    var _this$evalFeature$val;\n\n    return (_this$evalFeature$val = this.evalFeature(key).value) !== null && _this$evalFeature$val !== void 0 ? _this$evalFeature$val : defaultValue;\n  } // eslint-disable-next-line\n\n\n  feature(id) {\n    return this.evalFeature(id);\n  } // eslint-disable-next-line\n\n\n  evalFeature(id) {\n    var _feature$defaultValue, _feature$defaultValue2;\n\n    // Global override\n    if (this._forcedFeatureValues.has(id)) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Global override\", {\n        id,\n        value: this._forcedFeatureValues.get(id)\n      });\n      return this.getFeatureResult(id, this._forcedFeatureValues.get(id), \"override\");\n    } // Unknown feature id\n\n\n    if (!this.context.features || !this.context.features[id]) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Unknown feature\", {\n        id\n      });\n      return this.getFeatureResult(id, null, \"unknownFeature\");\n    } // Get the feature\n\n\n    const feature = this.context.features[id]; // Loop through the rules\n\n    if (feature.rules) {\n      for (const rule of feature.rules) {\n        // If it's a conditional rule, skip if the condition doesn't pass\n        if (rule.condition && !this.conditionPasses(rule.condition)) {\n          process.env.NODE_ENV !== \"production\" && this.log(\"Skip rule because of condition\", {\n            id,\n            rule\n          });\n          continue;\n        } // Feature value is being forced\n\n\n        if (\"force\" in rule) {\n          // Skip if coverage is reduced and user not included\n          if (\"coverage\" in rule) {\n            const {\n              hashValue\n            } = this.getHashAttribute(rule.hashAttribute);\n\n            if (!hashValue) {\n              process.env.NODE_ENV !== \"production\" && this.log(\"Skip rule because of missing hashAttribute\", {\n                id,\n                rule\n              });\n              continue;\n            }\n\n            const n = hash(hashValue + id);\n\n            if (n > rule.coverage) {\n              process.env.NODE_ENV !== \"production\" && this.log(\"Skip rule because of coverage\", {\n                id,\n                rule\n              });\n              continue;\n            }\n          }\n\n          process.env.NODE_ENV !== \"production\" && this.log(\"Force value from rule\", {\n            id,\n            rule\n          }); // eslint-disable-next-line\n\n          return this.getFeatureResult(id, rule.force, \"force\", rule.id);\n        }\n\n        if (!rule.variations) {\n          process.env.NODE_ENV !== \"production\" && this.log(\"Skip invalid rule\", {\n            id,\n            rule\n          });\n          continue;\n        } // For experiment rules, run an experiment\n\n\n        const exp = {\n          variations: rule.variations,\n          key: rule.key || id\n        };\n        if (\"coverage\" in rule) exp.coverage = rule.coverage;\n        if (rule.weights) exp.weights = rule.weights;\n        if (rule.hashAttribute) exp.hashAttribute = rule.hashAttribute;\n        if (rule.namespace) exp.namespace = rule.namespace; // Only return a value if the user is part of the experiment\n\n        const res = this._run(exp, id);\n\n        this.fireSubscriptions(exp, res);\n\n        if (res.inExperiment) {\n          return this.getFeatureResult(id, res.value, \"experiment\", rule.id, exp, res);\n        }\n      }\n    }\n\n    process.env.NODE_ENV !== \"production\" && this.log(\"Use default value\", {\n      id,\n      value: (_feature$defaultValue = feature.defaultValue) !== null && _feature$defaultValue !== void 0 ? _feature$defaultValue : null\n    }); // Fall back to using the default value\n\n    return this.getFeatureResult(id, (_feature$defaultValue2 = feature.defaultValue) !== null && _feature$defaultValue2 !== void 0 ? _feature$defaultValue2 : null, \"defaultValue\");\n  }\n\n  conditionPasses(condition) {\n    return evalCondition(this.getAttributes(), condition);\n  }\n\n  _run(experiment, featureId) {\n    const key = experiment.key;\n    const numVariations = experiment.variations.length; // 1. If experiment has less than 2 variations, return immediately\n\n    if (numVariations < 2) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Invalid experiment\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 2. If the context is disabled, return immediately\n\n\n    if (this.context.enabled === false) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Context disabled\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 2.5. Merge in experiment overrides from the context\n\n\n    experiment = this.mergeOverrides(experiment); // 3. If a variation is forced from a querystring, return the forced variation\n\n    const qsOverride = getQueryStringOverride(key, this.getContextUrl(), numVariations);\n\n    if (qsOverride !== null) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Force via querystring\", {\n        id: key,\n        variation: qsOverride\n      });\n      return this.getResult(experiment, qsOverride, false, featureId);\n    } // 4. If a variation is forced in the context, return the forced variation\n\n\n    if (this.context.forcedVariations && key in this.context.forcedVariations) {\n      const variation = this.context.forcedVariations[key];\n      process.env.NODE_ENV !== \"production\" && this.log(\"Force via dev tools\", {\n        id: key,\n        variation\n      });\n      return this.getResult(experiment, variation, false, featureId);\n    } // 5. Exclude if a draft experiment or not active\n\n\n    if (experiment.status === \"draft\" || experiment.active === false) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Skip because inactive\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 6. Get the hash attribute and return if empty\n\n\n    const {\n      hashValue\n    } = this.getHashAttribute(experiment.hashAttribute);\n\n    if (!hashValue) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Skip because missing hashAttribute\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 7. Exclude if user not in experiment.namespace\n\n\n    if (experiment.namespace && !inNamespace(hashValue, experiment.namespace)) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Skip because of namespace\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 7.5. Exclude if experiment.include returns false or throws\n\n\n    if (experiment.include && !isIncluded(experiment.include)) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Skip because of include function\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 8. Exclude if condition is false\n\n\n    if (experiment.condition && !this.conditionPasses(experiment.condition)) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Skip because of condition\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 8.1. Exclude if user is not in a required group\n\n\n    if (experiment.groups && !this.hasGroupOverlap(experiment.groups)) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Skip because of groups\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 8.2. Exclude if not on a targeted url\n\n\n    if (experiment.url && !this.urlIsValid(experiment.url)) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Skip because of url\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 9. Get bucket ranges and choose variation\n\n\n    const ranges = getBucketRanges(numVariations, experiment.coverage || 1, experiment.weights);\n    const n = hash(hashValue + key);\n    const assigned = chooseVariation(n, ranges); // 10. Return if not in experiment\n\n    if (assigned < 0) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Skip because of coverage\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 11. Experiment has a forced variation\n\n\n    if (\"force\" in experiment) {\n      var _experiment$force;\n\n      process.env.NODE_ENV !== \"production\" && this.log(\"Force variation\", {\n        id: key,\n        variation: experiment.force\n      });\n      return this.getResult(experiment, (_experiment$force = experiment.force) !== null && _experiment$force !== void 0 ? _experiment$force : -1, false, featureId);\n    } // 12. Exclude if in QA mode\n\n\n    if (this.context.qaMode) {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Skip because QA mode\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 12.5. Exclude if experiment is stopped\n\n\n    if (experiment.status === \"stopped\") {\n      process.env.NODE_ENV !== \"production\" && this.log(\"Skip because stopped\", {\n        id: key\n      });\n      return this.getResult(experiment, -1, false, featureId);\n    } // 13. Build the result object\n\n\n    const result = this.getResult(experiment, assigned, true, featureId); // 14. Fire the tracking callback\n\n    this.track(experiment, result); // 15. Return the result\n\n    process.env.NODE_ENV !== \"production\" && this.log(\"In experiment\", {\n      id: key,\n      variation: result.variationId\n    });\n    return result;\n  } // eslint-disable-next-line\n\n\n  log(msg, ctx) {\n    if (!this.debug) return;\n    if (this.context.log) this.context.log(msg, ctx);else console.log(msg, ctx);\n  }\n\n  track(experiment, result) {\n    if (!this.context.trackingCallback) return;\n    const key = experiment.key; // Make sure a tracking callback is only fired once per unique experiment\n\n    const k = result.hashAttribute + result.hashValue + key + result.variationId;\n    if (this._trackedExperiments.has(k)) return;\n\n    this._trackedExperiments.add(k);\n\n    try {\n      this.context.trackingCallback(experiment, result);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  mergeOverrides(experiment) {\n    const key = experiment.key;\n    const o = this.context.overrides;\n\n    if (o && o[key]) {\n      experiment = Object.assign({}, experiment, o[key]);\n\n      if (typeof experiment.url === \"string\") {\n        experiment.url = getUrlRegExp( // eslint-disable-next-line\n        experiment.url);\n      }\n    }\n\n    return experiment;\n  }\n\n  getHashAttribute(attr) {\n    const hashAttribute = attr || \"id\";\n    let hashValue = \"\";\n\n    if (this._attributeOverrides[hashAttribute]) {\n      hashValue = this._attributeOverrides[hashAttribute];\n    } else if (this.context.attributes) {\n      hashValue = this.context.attributes[hashAttribute] || \"\";\n    } else if (this.context.user) {\n      hashValue = this.context.user[hashAttribute] || \"\";\n    }\n\n    return {\n      hashAttribute,\n      hashValue\n    };\n  }\n\n  getResult(experiment, variationIndex, hashUsed, featureId) {\n    let inExperiment = true; // If assigned variation is not valid, use the baseline and mark the user as not in the experiment\n\n    if (variationIndex < 0 || variationIndex >= experiment.variations.length) {\n      variationIndex = 0;\n      inExperiment = false;\n    }\n\n    const {\n      hashAttribute,\n      hashValue\n    } = this.getHashAttribute(experiment.hashAttribute);\n    return {\n      featureId,\n      inExperiment,\n      hashUsed,\n      variationId: variationIndex,\n      value: experiment.variations[variationIndex],\n      hashAttribute,\n      hashValue\n    };\n  }\n\n  getContextUrl() {\n    return this.context.url || (isBrowser ? window.location.href : \"\");\n  }\n\n  urlIsValid(urlRegex) {\n    const url = this.getContextUrl();\n    if (!url) return false;\n    const pathOnly = url.replace(/^https?:\\/\\//, \"\").replace(/^[^/]*\\//, \"/\");\n    if (urlRegex.test(url)) return true;\n    if (urlRegex.test(pathOnly)) return true;\n    return false;\n  }\n\n  hasGroupOverlap(expGroups) {\n    const groups = this.context.groups || {};\n\n    for (let i = 0; i < expGroups.length; i++) {\n      if (groups[expGroups[i]]) return true;\n    }\n\n    return false;\n  }\n\n}\n//# sourceMappingURL=GrowthBook.js.map","export { GrowthBook } from '@growthbook/growthbook';\nimport * as React from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nconst GrowthBookContext = /*#__PURE__*/React.createContext({});\n\nfunction run(exp, growthbook) {\n  if (!growthbook) {\n    return {\n      featureId: null,\n      value: exp.variations[0],\n      variationId: 0,\n      inExperiment: false,\n      hashUsed: false,\n      hashAttribute: exp.hashAttribute || \"id\",\n      hashValue: \"\"\n    };\n  }\n\n  return growthbook.run(exp);\n}\n\nfunction feature(id, growthbook) {\n  if (!growthbook) {\n    return {\n      value: null,\n      on: false,\n      off: true,\n      source: \"unknownFeature\",\n      ruleId: \"\"\n    };\n  }\n\n  return growthbook.feature(id);\n}\n\nfunction useExperiment(exp) {\n  const {\n    growthbook\n  } = React.useContext(GrowthBookContext);\n  return run(exp, growthbook);\n}\nfunction useFeature(id) {\n  const {\n    growthbook\n  } = React.useContext(GrowthBookContext);\n  return feature(id, growthbook);\n}\nfunction useGrowthBook() {\n  const {\n    growthbook\n  } = React.useContext(GrowthBookContext);\n  return growthbook;\n}\nfunction IfFeatureEnabled({\n  children,\n  feature\n}) {\n  return useFeature(feature).on ? /*#__PURE__*/React.createElement(React.Fragment, null, children) : null;\n}\nfunction FeatureString(props) {\n  const value = useFeature(props.feature).value;\n\n  if (value !== null) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, value);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, props.default);\n}\nconst withRunExperiment = Component => {\n  // eslint-disable-next-line\n  const withRunExperimentWrapper = props => /*#__PURE__*/React.createElement(GrowthBookContext.Consumer, null, ({\n    growthbook\n  }) => {\n    return /*#__PURE__*/React.createElement(Component, _extends({}, props, {\n      runExperiment: exp => run(exp, growthbook)\n    }));\n  });\n\n  return withRunExperimentWrapper;\n};\nwithRunExperiment.displayName = \"WithRunExperiment\";\nconst GrowthBookProvider = ({\n  children,\n  growthbook\n}) => {\n  // Tell growthbook how to re-render our app (for dev mode integration)\n  // eslint-disable-next-line\n  const [_, setRenderCount] = React.useState(0);\n  React.useEffect(() => {\n    if (!growthbook || !growthbook.setRenderer) return;\n    growthbook.setRenderer(() => {\n      setRenderCount(v => v + 1);\n    });\n    return () => {\n      growthbook.setRenderer(() => {// do nothing\n      });\n    };\n  }, [growthbook]);\n  return /*#__PURE__*/React.createElement(GrowthBookContext.Provider, {\n    value: {\n      growthbook\n    }\n  }, children);\n};\n\nexport { FeatureString, GrowthBookContext, GrowthBookProvider, IfFeatureEnabled, useExperiment, useFeature, useGrowthBook, withRunExperiment };\n//# sourceMappingURL=index.js.map\n","import {\n  GrowthBook,\n  GrowthBookProvider as BaseGrowthBookProvider,\n  type Context,\n  GrowthBookContext,\n  type Experiment,\n  type Result,\n} from '@growthbook/growthbook-react'\nimport * as React from 'react'\n\nexport const initABTesting = (options: Context) => {\n  const abTester = new GrowthBook(options)\n\n  const ABTestingProvider = ({\n    children,\n  }: React.PropsWithChildren<unknown>) => {\n    return (\n      <BaseGrowthBookProvider growthbook={abTester}>\n        {children}\n      </BaseGrowthBookProvider>\n    )\n  }\n\n  return { ABTestingProvider, abTester }\n}\n\n// Why not the default \"useExperiment\"?\n\n// The default `useExperiment` hook doesn't wrap `growthbook.run` in an\n// effect. This is a problem because `growthbook.run` fires growthbook subscriptions\n// and if we use these subscriptions to update any react state or trigger re-renders ðŸ’¥\n\nexport function useExperiment<T>(config: Experiment<T>): Result<T> {\n  const { growthbook } = React.useContext(GrowthBookContext)\n\n  const resultRef = React.useRef(\n    // @ts-expect-error: using private `_run` to avoid firing subscriptions\n    growthbook?._run(config) ?? {\n      featureId: null,\n      value: config.variations[0],\n      variationId: 0,\n      inExperiment: false,\n      hashUsed: false,\n      hashAttribute: config.hashAttribute || 'id',\n      hashValue: '',\n    }\n  )\n\n  React.useEffect(() => {\n    if (growthbook) {\n      resultRef.current = growthbook.run(config)\n    }\n  })\n\n  return resultRef.current\n}\n\nexport {\n  IfFeatureEnabled,\n  FeatureString,\n  withRunExperiment,\n} from '@growthbook/growthbook-react'\n\nexport type {\n  GrowthBook as ABTester,\n  Experiment,\n  Result,\n} from '@growthbook/growthbook-react'\n","import { useExperiment } from '@toggl/ab-testing';\n\nexport const useNewTabDiscoveryExperiment = () => {\n  return useExperiment({\n    key: 'new-tab-discovery',\n    variations: ['control', 'settings'],\n    active: window.browser === undefined,\n  });\n};\n","import { initABTesting } from '@toggl/ab-testing';\n\nconst { abTester, ABTestingProvider } = initABTesting({\n  trackingCallback(experiment, result) {\n    if (window.heap)\n      window.heap.track('experiment_viewed', {\n        experiment_id: experiment.key,\n        variation_id: result.value,\n      });\n  },\n});\n\nexport { abTester, ABTestingProvider };\n","import { useExperiment } from '@toggl/ab-testing';\nimport { isFirefox } from '@src/lib/utils';\nimport { Db } from '@src/lib/db';\nimport React from 'react';\n\nexport const useReminderNotificationExperiment = () => {\n  const result = useExperiment({\n    key: 'reminder-notification',\n    variations: ['control', 'variant'],\n    active: !isFirefox(),\n  });\n\n  React.useEffect(() => {\n    if (result.value === 'variant') {\n      void Db.get('reminderManuallyEdited').then(edited => {\n        if (!edited) Db.set('remindersCheckEnabled', true);\n      });\n    }\n  }, [result.value]);\n\n  return result;\n};\n"],"names":["hashFnv32a","str","hval","l","i","hash","getEqualWeights","n","inNamespace","hashValue","namespace","chooseVariation","ranges","getUrlRegExp","regexString","escaped","e","getBucketRanges","numVariations","coverage","weights","equal","totalWeight","w","sum","cumulative","start","getQueryStringOverride","id","url","search","match","kv","k","v","isIncluded","include","_regexCache","evalCondition","obj","condition","evalOr","evalAnd","evalConditionValue","getPath","path","parts","current","getRegex","regex","value","isOperatorObject","op","evalOperatorCondition","keys","getType","elemMatch","actual","expected","check","operator","passed","j","conditions","_defineProperty","key","isBrowser","GrowthBook","context","features","attributes","overrides","vars","map","cb","renderer","variation","experiment","result","prev","res","stringifiedValue","q","source","ruleId","ret","defaultValue","_this$evalFeature$val","_feature$defaultValue2","feature","rule","exp","featureId","qsOverride","assigned","_experiment$force","msg","ctx","o","attr","hashAttribute","variationIndex","hashUsed","inExperiment","urlRegex","pathOnly","expGroups","groups","GrowthBookContext","React.createContext","GrowthBookProvider","children","growthbook","_","setRenderCount","React.useState","React.useEffect","React.createElement","initABTesting","options","abTester","ABTestingProvider","BaseGrowthBookProvider","useExperiment","config","React","resultRef","useRef","_run","variations","variationId","run","useNewTabDiscoveryExperiment","useReminderNotificationExperiment","isFirefox","Db","edited"],"mappings":"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"}