import{D as n}from"./errorReport.js";import{b as s}from"./browser-polyfill.js";import{d as o,b as i}from"./timeEntry.js";const r="track-stop-at-day-end",m=async()=>{const a=await o(),t=Object.values(a).find(e=>(e==null?void 0:e.duration)<0);t&&i(t,null).then(()=>{setTimeout(()=>{s.exports.runtime.sendMessage({type:"updateTEs"})},500)})},d=()=>{s.exports.alarms.onAlarm.addListener(a=>{a.name===r&&m()})},f=async a=>{let t=n.fromISO(a).set({second:0});t<n.now()&&(t=t.plus({days:1}));const e=await s.exports.alarms.get(r);e&&await s.exports.alarms.clear(e.name),s.exports.alarms.create(r,{when:t.toMillis(),periodInMinutes:60*24})},y=async()=>{const a=await s.exports.alarms.get(r);a&&await s.exports.alarms.clear(a.name)};export{f as a,y as b,d as c};
//# sourceMappingURL=stopTimeAtDayEnd.js.map
