togglbutton.render(".issue-details .detail-page-description:not(.toggl)",{observe:!0},function(e){const t=[[c()].filter(Boolean).map(function(n){return"#"+n}).join(""),i(e)].filter(Boolean).join(" ");a($(".detail-page-header-actions"),t,!0),a($(".time-tracker"),t)});togglbutton.render(".merge-request > .detail-page-header:not(.toggl)",{observe:!0},function(e){const t=[[c()].filter(Boolean).map(function(n){return"MR"+n+"::"}).join(""),i(e)].filter(Boolean).join(" ");a($(".detail-page-header-actions"),t,!0),a($(".time-tracker"),t)});function a(e,t,n=!1){const r=togglbutton.createTimerLink({className:"gitlab",description:t,tags:s,taskId:(o,l)=>d(o,l),projectName:(o,l)=>p(o,l)});n?e.parentElement.insertBefore(r,e):e.parentElement.appendChild(r,e)}function i(e){const t=e.querySelector(".title");return t?t.textContent.trim():""}function c(){const e=window.location.pathname,t=/-\/(issues|merge_requests)\/(?<id>\d+)/;return(t.test(e)?e.match(t):{groups:{id:""}}).groups.id}function s(){const e=document.querySelectorAll("div.labels span[data-qa-label-name]");if(!e)return[];const t=[];for(const n of Object.values(e)){const r=n.getAttribute("data-qa-label-name");t.push(r)}return t}const u=()=>{debugger;let e=null,t=s();const n=/togg(e|)l(::|:)/gim,r=/ .*/;debugger;return Array.isArray(t)&&t.forEach(o=>{if(o.match(n)){e=o.replace(n,"").toUpperCase().replace(r,"");return}}),e};function d(e,t){debugger;let n=u();if(n===null)return{};const r=Object.keys(t).filter(l=>t[l].name.startsWith(n));return r.length>0?t[r[0]].id:{}}function f(e,t,n){if(e===null)return null;const r=Object.keys(n).filter(l=>n[l].name.startsWith(e)),o=r.length>0?n[r[0]].project_id:null;return console.log(o),o}function p(e,t){debugger;let n=u();if(n===null)return null;let r=f(n,e,t);const o=Object.keys(e).filter(g=>e[g].id===r),l=o.length>0?e[o[0]].name:null;return console.log(l),l}
